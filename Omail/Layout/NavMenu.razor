@using Omail.Components
@inject AuthenticationStateProvider AuthStateProvider

<div class="flex flex-col h-full">
    <div class="flex-1">
        <ul class="space-y-1">
            <!-- Email Navigation Items -->
            <li>
                <NavLink href="inbox" Match="NavLinkMatch.All" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
                    <span class="absolute left-0 w-1 h-8 bg-omail-100 rounded-r-md opacity-0 transform scale-y-0 group-[.active]:opacity-100 group-[.active]:scale-y-100 transition-all duration-300 origin-left"></span>
                    <div class="min-w-[32px] flex justify-center">
                        <IconFallback IconType="inbox" CssClass="w-8 h-8 md:w-7 md:h-7 lg:w-8 lg:h-8" />
                    </div>
                    <span class="transition-all duration-200 group-[.active]:font-medium group-[.active]:text-omail-50 ml-3 lg:inline md:hidden">Inbox</span>
                    <div class="hidden md:block lg:hidden absolute left-full ml-2 px-2 py-1 bg-omail-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                        Inbox
                    </div>
                </NavLink>
            </li>
            <li>
                <NavLink href="compose" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
                    <span class="absolute left-0 w-1 h-8 bg-omail-100 rounded-r-md opacity-0 transform scale-y-0 group-[.active]:opacity-100 group-[.active]:scale-y-100 transition-all duration-300 origin-left"></span>
                    <div class="min-w-[32px] flex justify-center">
                        <IconFallback IconType="compose" CssClass="w-8 h-8 md:w-7 md:h-7 lg:w-8 lg:h-8" />
                    </div>
                    <span class="transition-all duration-200 group-[.active]:font-medium group-[.active]:text-omail-50 ml-3 lg:inline md:hidden">Compose</span>
                    <div class="hidden md:block lg:hidden absolute left-full ml-2 px-2 py-1 bg-omail-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                        Compose
                    </div>
                </NavLink>
            </li>
            <li>
                <NavLink href="sent" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
                    <span class="absolute left-0 w-1 h-8 bg-omail-100 rounded-r-md opacity-0 transform scale-y-0 group-[.active]:opacity-100 group-[.active]:scale-y-100 transition-all duration-300 origin-left"></span>
                    <div class="min-w-[32px] flex justify-center">
                        <IconFallback IconType="sent" CssClass="w-8 h-8 md:w-7 md:h-7 lg:w-8 lg:h-8" />
                    </div>
                    <span class="transition-all duration-200 group-[.active]:font-medium group-[.active]:text-omail-50 ml-3 lg:inline md:hidden">Sent</span>
                    <div class="hidden md:block lg:hidden absolute left-full ml-2 px-2 py-1 bg-omail-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                        Sent
                    </div>
                </NavLink>
            </li>
            <li>
                <NavLink href="drafts" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
                    <span class="absolute left-0 w-1 h-8 bg-omail-100 rounded-r-md opacity-0 transform scale-y-0 group-[.active]:opacity-100 group-[.active]:scale-y-100 transition-all duration-300 origin-left"></span>
                    <div class="min-w-[32px] flex justify-center">
                        <IconFallback IconType="drafts" CssClass="w-8 h-8 md:w-7 md:h-7 lg:w-8 lg:h-8" />
                    </div>
                    <span class="transition-all duration-200 group-[.active]:font-medium group-[.active]:text-omail-50 ml-3 lg:inline md:hidden">Drafts</span>
                    <div class="hidden md:block lg:hidden absolute left-full ml-2 px-2 py-1 bg-omail-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                        Drafts
                    </div>
                </NavLink>
            </li>
            <li>
                <NavLink href="trash" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
                    <span class="absolute left-0 w-1 h-8 bg-omail-100 rounded-r-md opacity-0 transform scale-y-0 group-[.active]:opacity-100 group-[.active]:scale-y-100 transition-all duration-300 origin-left"></span>
                    <div class="min-w-[32px] flex justify-center">
                        <IconFallback IconType="trash" CssClass="w-8 h-8 md:w-7 md:h-7 lg:w-8 lg:h-8" />
                    </div>
                    <span class="transition-all duration-200 group-[.active]:font-medium group-[.active]:text-omail-50 ml-3 lg:inline md:hidden">Trash</span>
                    <div class="hidden md:block lg:hidden absolute left-full ml-2 px-2 py-1 bg-omail-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                        Trash
                    </div>
                </NavLink>
            </li>
            <li class="my-2 border-t border-omail-500/30"></li>

            <!-- Admin Section - Only visible to users with Manager role -->
            <AuthorizeView Roles="Manager">
                <li class="my-2 border-t border-omail-500/30"></li>
                <li>
                    <NavLink href="admin" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
                        <span class="absolute left-0 w-1 h-8 bg-omail-100 rounded-r-md opacity-0 transform scale-y-0 group-[.active]:opacity-100 group-[.active]:scale-y-100 transition-all duration-300 origin-left"></span>
                        <div class="min-w-[32px] flex justify-center">
                            <IconFallback IconType="dashboard" CssClass="w-8 h-8 md:w-7 md:h-7 lg:w-8 lg:h-8" />
                        </div>
                        <span class="transition-all duration-200 group-[.active]:font-medium group-[.active]:text-omail-50 ml-3 lg:inline md:hidden">Admin</span>
                        <div class="hidden md:block lg:hidden absolute left-full ml-2 px-2 py-1 bg-omail-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                            Admin
                        </div>
                    </NavLink>
                </li>

                <!-- Admin submenu items -->
                <li class="pl-6 space-y-1 mt-2">
                    <NavLink href="admin/users/management" class="flex items-center px-4 py-2 rounded-lg text-white/80 hover:bg-omail-600/60 transition-all duration-200 text-sm" ActiveClass="bg-gradient-to-r from-omail-400/50 to-omail-600/70 text-white">
                        <IconFallback IconType="users" CssClass="w-5 h-5 mr-2" />
                        <span class="lg:inline md:hidden">Users</span>
                    </NavLink>
                    
                    <NavLink href="admin/organizations" class="flex items-center px-4 py-2 rounded-lg text-white/80 hover:bg-omail-600/60 transition-all duration-200 text-sm" ActiveClass="bg-gradient-to-r from-omail-400/50 to-omail-600/70 text-white">
                        <IconFallback IconType="organization" CssClass="w-5 h-5 mr-2" />
                        <span class="lg:inline md:hidden">Organization</span>
                    </NavLink>
                    
                    <NavLink href="admin/email-templates" class="flex items-center px-4 py-2 rounded-lg text-white/80 hover:bg-omail-600/60 transition-all duration-200 text-sm" ActiveClass="bg-gradient-to-r from-omail-400/50 to-omail-600/70 text-white">
                        <IconFallback IconType="email-templates" CssClass="w-5 h-5 mr-2" />
                        <span class="lg:inline md:hidden">Email Templates</span>
                    </NavLink>
                </li>
            </AuthorizeView>

            <li class="my-2 border-t border-omail-500/30"></li>

            <li>
                <NavLink href="settings" class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
                    <span class="absolute left-0 w-1 h-8 bg-omail-100 rounded-r-md opacity-0 transform scale-y-0 group-[.active]:opacity-100 group-[.active]:scale-y-100 transition-all duration-300 origin-left"></span>
                    <div class="min-w-[32px] flex justify-center">
                        <IconFallback IconType="settings" CssClass="w-8 h-8 md:w-7 md:h-7 lg:w-8 lg:h-8" />
                    </div>
                    <span class="transition-all duration-200 group-[.active]:font-medium group-[.active]:text-omail-50 ml-3 lg:inline md:hidden">Settings</span>
                    <div class="hidden md:block lg:hidden absolute left-full ml-2 px-2 py-1 bg-omail-800 text-white text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
                        Settings
                    </div>
                </NavLink>
            </li>
        </ul>
    </div>

    <!-- Mobile menu items -->
    <div class="sm:hidden px-2 pt-2 pb-3 space-y-1">
        <!-- Email mobile menu items -->
        <NavLink href="inbox" 
            class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" 
            ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
            <div class="min-w-[32px] flex justify-center">
                <IconFallback IconType="inbox" CssClass="w-8 h-8" />
            </div>
            <span class="ml-3">Inbox</span>
        </NavLink>
        
        <NavLink href="compose" 
            class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" 
            ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
            <div class="min-w-[32px] flex justify-center">
                <IconFallback IconType="compose" CssClass="w-8 h-8" />
            </div>
            <span class="ml-3">Compose</span>
        </NavLink>
        
        <NavLink href="sent" 
            class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" 
            ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
            <div class="min-w-[32px] flex justify-center">
                <IconFallback IconType="sent" CssClass="w-8 h-8" />
            </div>
            <span class="ml-3">Sent</span>
        </NavLink>
        
        <NavLink href="drafts" 
            class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" 
            ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
            <div class="min-w-[32px] flex justify-center">
                <IconFallback IconType="drafts" CssClass="w-8 h-8" />
            </div>
            <span class="ml-3">Drafts</span>
        </NavLink>
        
        <NavLink href="trash" 
            class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" 
            ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
            <div class="min-w-[32px] flex justify-center">
                <IconFallback IconType="trash" CssClass="w-8 h-8" />
            </div>
            <span class="ml-3">Trash</span>
        </NavLink>
        
        <!-- Admin Mobile Menu Items -->
        <AuthorizeView Roles="Manager">
            <NavLink href="admin" 
                class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" 
                ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
                <div class="min-w-[32px] flex justify-center">
                    <IconFallback IconType="dashboard" CssClass="w-8 h-8" />
                </div>
                <span class="ml-3">Admin Dashboard</span>
            </NavLink>
            <NavLink href="admin/users" 
                class="flex items-center px-4 py-3 rounded-lg text-white/80 hover:bg-omail-600/60 transition-all duration-200 pl-8" 
                ActiveClass="bg-gradient-to-r from-omail-400/50 to-omail-600/70 text-white">
                <div class="min-w-[32px] flex justify-center">
                    <IconFallback IconType="users" CssClass="w-5 h-5" />
                </div>
                <span class="ml-3">Users</span>
            </NavLink>
            <NavLink href="admin/organizations" 
                class="flex items-center px-4 py-3 rounded-lg text-white/80 hover:bg-omail-600/60 transition-all duration-200 pl-8" 
                ActiveClass="bg-gradient-to-r from-omail-400/50 to-omail-600/70 text-white">
                <div class="min-w-[32px] flex justify-center">
                    <IconFallback IconType="organization" CssClass="w-5 h-5" />
                </div>
                <span class="ml-3">Organization</span>
            </NavLink>
            <NavLink href="admin/email-templates" 
                class="flex items-center px-4 py-3 rounded-lg text-white/80 hover:bg-omail-600/60 transition-all duration-200 pl-8" 
                ActiveClass="bg-gradient-to-r from-omail-400/50 to-omail-600/70 text-white">
                <div class="min-w-[32px] flex justify-center">
                    <IconFallback IconType="email-templates" CssClass="w-5 h-5" />
                </div>
                <span class="ml-3">Email Templates</span>
            </NavLink>
        </AuthorizeView>
       
        <NavLink href="settings" 
            class="flex items-center px-4 py-3 rounded-lg text-white hover:bg-omail-600/80 transition-all duration-200 group relative" 
            ActiveClass="bg-gradient-to-r from-omail-400/70 to-omail-600/90 shadow-omail">
            <div class="min-w-[32px] flex justify-center">
                <IconFallback IconType="settings" CssClass="w-8 h-8" />
            </div>
            <span class="ml-3">Settings</span>
        </NavLink>
    </div>

    <div class="mt-6 pt-4 border-t border-omail-200/30 dark:border-omail-600/30 lg:block md:hidden">
        <div class="text-omail-100 text-xs opacity-75">
            <div>Version: 1.0.0</div>
            <div>Built with Blazor WebAssembly</div>
        </div>
    </div>
</div>

@code {
    private bool collapseNavMenu = true;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
}
